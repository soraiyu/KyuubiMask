# APKダウンロード完全ガイド 📥

GitHub ActionsでビルドされたAPKをダウンロードする方法を、**画像付きで詳しく**解説します。

## 🎯 概要

GitHub ActionsでビルドされたAPKは、2つの方法でダウンロードできます：

1. **GitHub Actions の Artifacts** から（開発版・Debug APK）
2. **GitHub Releases** から（リリース版・Release APK）

---

## 📦 方法1: GitHub Actions Artifacts からダウンロード

この方法は、**最新の開発版APKをすぐに試したい**ときに便利です。

### ステップ1: GitHub Actions ページにアクセス

1. KyuubiMask の GitHub リポジトリを開く
   ```
   https://github.com/soraiyu/KyuubiMask
   ```

2. 上部メニューの **「Actions」** タブをクリック

   または、直接アクセス:
   ```
   https://github.com/soraiyu/KyuubiMask/actions
   ```

**画面イメージ:**
```
┌─────────────────────────────────────────────────────┐
│ < > Code  Issues  Pull requests  [Actions]  ...     │
└─────────────────────────────────────────────────────┘
         ↑ ここをクリック
```

### ステップ2: ワークフローを選択

1. 左サイドバーから **「Android CI」** をクリック

**画面イメージ:**
```
┌──────────────────┐  ┌────────────────────────────┐
│ All workflows    │  │ Android CI                 │
│ ─────────────    │  │ ──────────────────────────│
│ [Android CI]  ←──┼──┤ ✅ Build APK (main)       │
│  Release Build   │  │ ✅ Build APK (develop)     │
└──────────────────┘  │ ❌ Build APK (test)        │
                      └────────────────────────────┘
```

2. ワークフロー実行の一覧が表示されます

### ステップ3: 成功したビルドを選択

1. 緑色のチェックマーク ✅ が付いたビルドをクリック
   - 最新のもの（一番上）を選ぶのがおすすめ

**画面イメージ:**
```
┌───────────────────────────────────────────────────┐
│ ✅ Add GitHub Actions CI/CD workflows             │ ← クリック
│    copilot/consult-app-ideas  #123                │
│    2 minutes ago                                  │
├───────────────────────────────────────────────────┤
│ ✅ Refactor: Use PreferencesRepository            │
│    copilot/consult-app-ideas  #122                │
│    1 hour ago                                     │
└───────────────────────────────────────────────────┘

凡例:
✅ = ビルド成功
❌ = ビルド失敗
🟡 = ビルド実行中
```

**注意**: 
- ✅（緑のチェック）= ビルド成功 → APKあり
- ❌（赤のバツ）= ビルド失敗 → APKなし
- 🟡（黄色の丸）= 実行中 → 完了まで待つ

### ステップ4: Artifacts を見つける

1. ワークフローの詳細ページが開きます
2. ページを下にスクロール
3. **「Artifacts」** セクションを見つける

**画面イメージ:**
```
┌─────────────────────────────────────────────────┐
│ Summary                                         │
├─────────────────────────────────────────────────┤
│ Jobs                                            │
│  ✅ build (5m 23s)                              │
├─────────────────────────────────────────────────┤
│ Artifacts                                       │  ← ここ！
│  📦 app-debug                      2.5 MB       │
│     Uploaded 2 minutes ago • Expires in 30 days │
└─────────────────────────────────────────────────┘
```

### ステップ5: APKをダウンロード

1. **「app-debug」** をクリック
2. 自動的にダウンロードが始まります
3. `app-debug.zip` というファイルがダウンロードされます

**ダウンロードされるファイル:**
```
app-debug.zip  (約2-3 MB)
```

### ステップ6: ZIPを解凍

1. ダウンロードした `app-debug.zip` を解凍
2. 中に `app-debug.apk` が入っています

**解凍後:**
```
app-debug.zip
  └─ app-debug.apk  ← これがインストールするファイル！
```

### ステップ7: APKをインストール

#### Windows/Mac の場合:

```bash
# 方法A: USBケーブルで接続してインストール
adb install app-debug.apk

# 方法B: APKをスマホに転送してインストール
# - メールで送る
# - クラウドストレージ（Google Drive、Dropboxなど）
# - USBケーブルでコピー
```

#### スマホで直接インストール:

1. APKファイルをスマホに転送
2. ファイルマネージャーで `app-debug.apk` をタップ
3. 「提供元不明のアプリのインストール」を許可
4. インストール実行

---

## 🎉 方法2: GitHub Releases からダウンロード

この方法は、**公式リリース版（署名なし）をダウンロードしたい**ときに使います。

### ステップ1: Releases ページにアクセス

1. KyuubiMask の GitHub リポジトリを開く

2. 右サイドバーの **「Releases」** をクリック

   または、直接アクセス:
   ```
   https://github.com/soraiyu/KyuubiMask/releases
   ```

**画面イメージ:**
```
┌──────────────────┐
│ About            │
│ ──────────────   │
│ 📋 README.md     │
│ 🏷️  [Releases]   │ ← ここをクリック
│ 📦 Packages      │
└──────────────────┘
```

### ステップ2: 最新リリースを選択

1. 最新バージョン（一番上）をクリック

**画面イメージ:**
```
┌────────────────────────────────────────────┐
│ Releases                                   │
├────────────────────────────────────────────┤
│ v1.0.1                          Latest     │ ← クリック
│ KyuubiMask 1.0.1                           │
│ Released 1 day ago                         │
├────────────────────────────────────────────┤
│ v1.0.0                                     │
│ Initial Release                            │
│ Released 1 week ago                        │
└────────────────────────────────────────────┘
```

### ステップ3: Assets からダウンロード

1. **「Assets」** セクションを展開（開いてない場合）
2. **「app-release-unsigned.apk」** をクリック

**画面イメージ:**
```
┌────────────────────────────────────────────┐
│ Assets                              ▼      │ ← 展開
├────────────────────────────────────────────┤
│ 📦 app-release-unsigned.apk    2.8 MB      │ ← クリック
│ 📄 Source code (zip)                       │
│ 📄 Source code (tar.gz)                    │
└────────────────────────────────────────────┘
```

3. APKファイルが直接ダウンロードされます（ZIPではない）

**ダウンロードされるファイル:**
```
app-release-unsigned.apk  (約2-3 MB)
```

### ステップ4: APKをインストール

Release版APKも、Debug版と同じ方法でインストールできます：

```bash
adb install app-release-unsigned.apk
```

または、スマホに転送してタップでインストール。

---

## 🔍 よくある質問（FAQ）

### Q1: Artifacts が見つかりません

**A:** 以下を確認してください：

1. **ビルドが成功しているか？**
   - ✅（緑のチェックマーク）になっていますか？
   - ❌ の場合はビルド失敗なのでAPKはありません

2. **ビルドが完了しているか？**
   - 🟡（実行中）の場合は、完了まで待ちます（通常5-10分）

3. **正しいワークフローを見ていますか？**
   - 「Android CI」ワークフローを選んでいますか？

4. **有効期限が切れていませんか？**
   - Artifactsは30日で削除されます
   - 古いビルドは見れません

### Q2: ZIPファイルが開けません

**A:** 
- Windows: 右クリック → 「すべて展開」
- Mac: ダブルクリックで自動展開
- Linux: `unzip app-debug.zip`

### Q3: APKがインストールできません

**A:** 
1. **「提供元不明のアプリ」を許可していますか？**
   - 設定 → セキュリティ → 提供元不明のアプリを許可

2. **既に古いバージョンがインストールされていますか？**
   - アンインストールしてから再度試す
   - または `adb install -r app-debug.apk`（上書き）

3. **Android バージョンは対応していますか？**
   - KyuubiMaskは Android 8.0 (API 26) 以上が必要

### Q4: Release版とDebug版の違いは？

**違い:**

| 項目 | Debug版 | Release版 |
|------|---------|-----------|
| **サイズ** | 大きい | 小さい |
| **最適化** | なし | あり（ProGuard/R8） |
| **デバッグログ** | 表示される | 表示されない |
| **署名** | 開発用署名 | 署名なし |
| **用途** | 開発・テスト | 配布・公開 |

**推奨:**
- 開発中・テスト: **Debug版**（Artifactsから）
- 一般配布: **Release版**（Releasesから）※署名が必要

### Q5: 保存期間は？

**A:**
- **Artifacts**: 30日間
- **Releases**: 無期限（削除されるまで）

古いビルドを取得したい場合は、Releaseタグを使用してください。

### Q6: 複数のAPKがある場合は？

**A:** 
もし複数のAPKがある場合（例: ARM版、x86版など）：
- 通常は `app-debug` または `app-release-unsigned` を選べばOK
- ユニバーサルAPKがない場合は、お使いのデバイスに合ったものを選択

---

## 📸 参考: 実際の画面遷移

### 完全な流れ（Artifactsの場合）

```
1. GitHub リポジトリ
   ↓ (Actionsタブをクリック)
   
2. Actions ページ
   ↓ (Android CI を選択)
   
3. Android CI ワークフロー一覧
   ↓ (✅ 成功したビルドをクリック)
   
4. ワークフロー詳細ページ
   ↓ (下にスクロール)
   
5. Artifacts セクション
   ↓ (app-debug をクリック)
   
6. ダウンロード開始
   ↓ (ZIPを解凍)
   
7. app-debug.apk 取得完了！
```

---

## 💡 ヒント

### 素早くダウンロードする方法

1. **ブックマーク登録:**
   ```
   https://github.com/soraiyu/KyuubiMask/actions
   ```
   を登録しておくと便利

2. **通知設定:**
   - リポジトリを「Watch」すると、ビルド完了時にメール通知
   - 「Custom」→「Workflows」で設定

3. **直リンク:**
   - 各ビルドの詳細ページURLをコピーして共有可能
   - 例: `https://github.com/soraiyu/KyuubiMask/actions/runs/123456789`

### トラブルシューティング

**症状: Artifactsが空**
- 原因: ビルドが途中で失敗した
- 解決: Jobsのログを確認して、どこで失敗したか調べる

**症状: ダウンロードが遅い**
- 原因: GitHub のサーバーが混雑
- 解決: 時間を置いて再試行、または Releases を使用

**症状: 「404 Not Found」**
- 原因: Artifactsの有効期限切れ（30日経過）
- 解決: 新しいビルドを待つ、または手動でビルド実行

---

## 🎯 まとめ

### APKダウンロードの完全ガイド

**開発版が欲しい場合（推奨）:**
1. Actions → Android CI → ✅成功したビルド
2. Artifacts → app-debug → ダウンロード
3. ZIPを解凍 → APKをインストール

**リリース版が欲しい場合:**
1. Releases → 最新バージョン
2. Assets → app-release-unsigned.apk → ダウンロード
3. APKをインストール

**わからないことがあれば:**
- [GitHub Issues](https://github.com/soraiyu/KyuubiMask/issues) で質問
- [BUILD_AND_TEST.md](BUILD_AND_TEST.md) も参照

---

**Happy Downloading! 📱🦊**
